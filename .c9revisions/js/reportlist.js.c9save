{"ts":1355271457508,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var scroll = new iScroll('wrapper', { vScrollbar: false, hScrollbar:false, hScroll: false });\nvar id = getUrlVars()[\"id\"];\n\nvar db;\n\ndocument.addEventListener(\"deviceready\", onDeviceReady, false);\n\nfunction onDeviceReady() {\n    db = window.openDatabase(\"EmployeeDirectoryDB\", \"1.0\", \"PhoneGap Demo\", 200000);\n    db.transaction(getReportList, transaction_error);\n}\n\nfunction transaction_error(tx, error) {\n\t$('#busy').hide();\n    alert(\"Database Error: \" + error);\n}\n\nfunction getReportList(tx) {\n\t$('#busy').show();\n\tvar sql = \"select e.id, e.firstName, e.lastName, e.title, e.picture, count(r.id) reportCount \" + \n\t\t\"from employee e left join employee r on r.managerId = e.id \" +\n\t\t\"where e.managerId=:id group by e.id order by e.lastName, e.firstName\";\n\ttx.executeSql(sql, [id], getReportList_success);\n}\n\nfunction getReportList_success(tx, results) {\n\t$('#busy').hide();\n    var len = results.rows.length;\n    for (var i=0; i<len; i++) {\n    \tvar employee = results.rows.item(i);\n\t\t$('#reportList').append('<li><a href=\"employeedetails.html?id=' + employee.id + '\">' +\n\t\t\t\t'<img src=\"pics/' + employee.picture + '\" class=\"list-icon\"/>' +\n\t\t\t\t'<p class=\"line1\">' + employee.firstName + ' ' + employee.lastName + '</p>' +\n\t\t\t\t'<p class=\"line2\">' + employee.title + '</p>' +\n\t\t\t\t'<span class=\"bubble\">' + employee.reportCount + '</span></a></li>');\n\t}\n\tsetTimeout(function(){\n\t\tscroll.refresh();\n\t});\n\tdb = null;\n}\n\nfunction getUrlVars() {\n    var vars = [], hash;\n    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');\n    for(var i = 0; i < hashes.length; i++)\n    {\n        hash = hashes[i].split('=');\n        vars.push(hash[0]);\n        vars[hash[0]] = hash[1];\n    }\n    return vars;\n}"]],"start1":0,"start2":0,"length1":0,"length2":1733}]],"length":1733}
{"contributors":[],"silentsave":false,"ts":1355271467821,"patch":[[{"diffs":[[0,"se(\""],[-1,"Employee"],[0,"Dire"]],"start1":251,"start2":251,"length1":16,"length2":8}]],"length":1725,"saved":false}
